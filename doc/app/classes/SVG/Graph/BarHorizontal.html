<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: SVG::Graph::BarHorizontal</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">SVG::Graph::BarHorizontal</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../../files/lib/SVG/Graph/BarHorizontal_rb.html">
                lib/SVG/Graph/BarHorizontal.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                <a href="BarBase.html">
                BarBase
               </a>
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <h3>Create presentation quality <a href="../../SVG.html">SVG</a> horitonzal bar graphs easily</h3>
<h1>Synopsis</h1>
<pre>
  require 'SVG/Graph/BarHorizontal'

  fields = %w(Jan Feb Mar)
  data_sales_02 = [12, 45, 21]

  graph = SVG::Graph::BarHorizontal.new({
    :height =&gt; 500,
    :width =&gt; 300,
    :fields =&gt; fields,
  })

  graph.add_data({
    :data =&gt; data_sales_02,
    :title =&gt; 'Sales 2002',
  })

  print &quot;Content-type: image/svg+xml\r\n\r\n&quot;
  print graph.burn
</pre>
<h1>Description</h1>
<p>
This object aims to allow you to easily create high quality <a
href="../../SVG.html">SVG</a> horitonzal bar graphs. You can either use the
default style sheet or supply your own. Either way there are many options
which can be configured to give you control over how the graph is generated
- with or without a key, data elements at each point, title, subtitle etc.
</p>
<h1>Examples</h1>
<ul>
<li><a
href="http://germane-software.com/repositories/public/SVG/test/test.rb">germane-software.com/repositories/public/SVG/test/test.rb</a>

</li>
</ul>
<h1>See also</h1>
<ul>
<li><a href="../Graph.html">SVG::Graph::Graph</a>

</li>
<li><a href="Bar.html">SVG::Graph::Bar</a>

</li>
<li><a href="Line.html">SVG::Graph::Line</a>

</li>
<li><a href="Pie.html">SVG::Graph::Pie</a>

</li>
<li><a href="Plot.html">SVG::Graph::Plot</a>

</li>
<li><a href="TimeSeries.html">SVG::Graph::TimeSeries</a>

</li>
</ul>
<h2>Author</h2>
<p>
Sean E. Russell &lt;serATgermaneHYPHENsoftwareDOTcom&gt;
</p>
<p>
Copyright 2004 Sean E. Russell This software is available under the Ruby <a
href="http://LICENSE.txt">license</a>
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000729">draw_data</a>&nbsp;&nbsp;
      <a href="#M000726">get_x_labels</a>&nbsp;&nbsp;
      <a href="#M000727">get_y_labels</a>&nbsp;&nbsp;
      <a href="#M000725">set_defaults</a>&nbsp;&nbsp;
      <a href="#M000728">y_label_offset</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000725" class="method-detail">
        <a name="M000725"></a>

        <div class="method-heading">
          <a href="#M000725" class="method-signature">
          <span class="method-name">set_defaults</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
In addition to the defaults set in BarBase::set_defaults, sets
</p>
<dl>
<dt>rotate_y_labels</dt><dd>true

</dd>
<dt>show_x_guidelines</dt><dd>true

</dd>
<dt>show_y_guidelines</dt><dd>false

</dd>
</dl>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000725-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000725-source">
<pre>
    <span class="ruby-comment cmt"># File lib/SVG/Graph/BarHorizontal.rb, line 63</span>
63:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_defaults</span>
64:         <span class="ruby-keyword kw">super</span>
65:         <span class="ruby-identifier">init_with</span>( 
66:           <span class="ruby-identifier">:rotate_y_labels</span>    =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>,
67:           <span class="ruby-identifier">:show_x_guidelines</span>  =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>,
68:           <span class="ruby-identifier">:show_y_guidelines</span>  =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>
69:         )
70:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">right_align</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">right_font</span> = <span class="ruby-value">1</span>
71:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <h3 class="section-bar">Protected Instance methods</h3>

      <div id="method-M000729" class="method-detail">
        <a name="M000729"></a>

        <div class="method-heading">
          <a href="#M000729" class="method-signature">
          <span class="method-name">draw_data</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000729-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000729-source">
<pre>
     <span class="ruby-comment cmt"># File lib/SVG/Graph/BarHorizontal.rb, line 103</span>
103:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">draw_data</span>
104:         <span class="ruby-identifier">minvalue</span> = <span class="ruby-identifier">min_value</span>
105:         <span class="ruby-identifier">fieldheight</span> = <span class="ruby-identifier">field_height</span>
106: 
107:         <span class="ruby-identifier">unit_size</span> = (<span class="ruby-ivar">@graph_width</span>.<span class="ruby-identifier">to_f</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">font_size</span><span class="ruby-operator">*</span><span class="ruby-value">2</span><span class="ruby-operator">*</span><span class="ruby-identifier">right_font</span> ) <span class="ruby-operator">/</span>
108:                         (<span class="ruby-identifier">get_x_labels</span>.<span class="ruby-identifier">max</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">get_x_labels</span>.<span class="ruby-identifier">min</span> )
109:         <span class="ruby-identifier">bargap</span> = <span class="ruby-identifier">bar_gap</span> <span class="ruby-value">? </span>(<span class="ruby-identifier">fieldheight</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">10</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">fieldheight</span> <span class="ruby-operator">/</span> <span class="ruby-value">2</span> <span class="ruby-operator">:</span> <span class="ruby-value">10</span>) <span class="ruby-operator">:</span> <span class="ruby-value">0</span>
110: 
111:         <span class="ruby-identifier">bar_height</span> = <span class="ruby-identifier">fieldheight</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">bargap</span>
112:         <span class="ruby-identifier">bar_height</span> <span class="ruby-operator">/=</span> <span class="ruby-ivar">@data</span>.<span class="ruby-identifier">length</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">stack</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:side</span>
113:         <span class="ruby-identifier">y_mod</span> = (<span class="ruby-identifier">bar_height</span> <span class="ruby-operator">/</span> <span class="ruby-value">2</span>) <span class="ruby-operator">+</span> (<span class="ruby-identifier">font_size</span> <span class="ruby-operator">/</span> <span class="ruby-value">2</span>)
114:         
115:         <span class="ruby-identifier">field_count</span> = <span class="ruby-value">1</span>
116:         <span class="ruby-ivar">@config</span>[<span class="ruby-identifier">:fields</span>].<span class="ruby-identifier">each_index</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
117:           <span class="ruby-identifier">dataset_count</span> = <span class="ruby-value">0</span>
118:           <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">dataset</span> <span class="ruby-keyword kw">in</span> <span class="ruby-ivar">@data</span>
119:             <span class="ruby-identifier">value</span> = <span class="ruby-identifier">dataset</span>[<span class="ruby-identifier">:data</span>][<span class="ruby-identifier">i</span>]
120:             
121:             <span class="ruby-identifier">top</span> = <span class="ruby-ivar">@graph_height</span> <span class="ruby-operator">-</span> (<span class="ruby-identifier">fieldheight</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">field_count</span>)
122:             <span class="ruby-identifier">top</span> <span class="ruby-operator">+=</span> (<span class="ruby-identifier">bar_height</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">dataset_count</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">stack</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:side</span>
123:             <span class="ruby-comment cmt"># cases (assume 0 = +ve):</span>
124:             <span class="ruby-comment cmt">#   value  min  length          left</span>
125:             <span class="ruby-comment cmt">#    +ve   +ve  value.abs - min minvalue.abs</span>
126:             <span class="ruby-comment cmt">#    +ve   -ve  value.abs - 0   minvalue.abs</span>
127:             <span class="ruby-comment cmt">#    -ve   -ve  value.abs - 0   minvalue.abs + value</span>
128:             <span class="ruby-identifier">length</span> = (<span class="ruby-identifier">value</span>.<span class="ruby-identifier">abs</span> <span class="ruby-operator">-</span> (<span class="ruby-identifier">minvalue</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">minvalue</span> <span class="ruby-operator">:</span> <span class="ruby-value">0</span>)) <span class="ruby-operator">*</span> <span class="ruby-identifier">unit_size</span>
129:             <span class="ruby-identifier">left</span> = (<span class="ruby-identifier">minvalue</span>.<span class="ruby-identifier">abs</span> <span class="ruby-operator">+</span> (<span class="ruby-identifier">value</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">:</span> <span class="ruby-value">0</span>)) <span class="ruby-operator">*</span> <span class="ruby-identifier">unit_size</span>
130: 
131:             <span class="ruby-ivar">@graph</span>.<span class="ruby-identifier">add_element</span>( <span class="ruby-value str">&quot;rect&quot;</span>, {
132:               <span class="ruby-value str">&quot;x&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">left</span>.<span class="ruby-identifier">to_s</span>,
133:               <span class="ruby-value str">&quot;y&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">top</span>.<span class="ruby-identifier">to_s</span>,
134:               <span class="ruby-value str">&quot;width&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">length</span>.<span class="ruby-identifier">to_s</span>,
135:               <span class="ruby-value str">&quot;height&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">bar_height</span>.<span class="ruby-identifier">to_s</span>,
136:               <span class="ruby-value str">&quot;class&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;fill#{dataset_count+1}&quot;</span>
137:             })
138: 
139:             <span class="ruby-identifier">make_datapoint_text</span>( 
140:               <span class="ruby-identifier">left</span><span class="ruby-operator">+</span><span class="ruby-identifier">length</span><span class="ruby-operator">+</span><span class="ruby-value">5</span>, <span class="ruby-identifier">top</span><span class="ruby-operator">+</span><span class="ruby-identifier">y_mod</span>, <span class="ruby-identifier">value</span>, <span class="ruby-value str">&quot;text-anchor: start; &quot;</span>
141:               )
142:             <span class="ruby-identifier">dataset_count</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
143:           <span class="ruby-keyword kw">end</span>
144:           <span class="ruby-identifier">field_count</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
145:         }
146:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000726" class="method-detail">
        <a name="M000726"></a>

        <div class="method-heading">
          <a href="#M000726" class="method-signature">
          <span class="method-name">get_x_labels</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000726-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000726-source">
<pre>
    <span class="ruby-comment cmt"># File lib/SVG/Graph/BarHorizontal.rb, line 75</span>
75:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_x_labels</span>
76:         <span class="ruby-identifier">maxvalue</span> = <span class="ruby-identifier">max_value</span>
77:         <span class="ruby-identifier">minvalue</span> = <span class="ruby-identifier">min_value</span>
78:         <span class="ruby-identifier">range</span> = <span class="ruby-identifier">maxvalue</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">minvalue</span>
79:         <span class="ruby-identifier">top_pad</span> = <span class="ruby-identifier">range</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-operator">?</span> <span class="ruby-value">10</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">range</span> <span class="ruby-operator">/</span> <span class="ruby-value">20.0</span>
80:         <span class="ruby-identifier">scale_range</span> = (<span class="ruby-identifier">maxvalue</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">top_pad</span>) <span class="ruby-operator">-</span> <span class="ruby-identifier">minvalue</span>
81: 
82:         <span class="ruby-identifier">scale_division</span> = <span class="ruby-identifier">scale_divisions</span> <span class="ruby-operator">||</span> (<span class="ruby-identifier">scale_range</span> <span class="ruby-operator">/</span> <span class="ruby-value">10.0</span>)
83: 
84:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">scale_integers</span>
85:           <span class="ruby-identifier">scale_division</span> = <span class="ruby-identifier">scale_division</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">1</span> <span class="ruby-operator">?</span> <span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">scale_division</span>.<span class="ruby-identifier">round</span>
86:         <span class="ruby-keyword kw">end</span>
87: 
88:         <span class="ruby-identifier">rv</span> = []
89:         <span class="ruby-identifier">maxvalue</span> = <span class="ruby-identifier">maxvalue</span><span class="ruby-operator">%</span><span class="ruby-identifier">scale_division</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-operator">?</span> 
90:           <span class="ruby-identifier">maxvalue</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">maxvalue</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">scale_division</span>
91:         <span class="ruby-identifier">minvalue</span>.<span class="ruby-identifier">step</span>( <span class="ruby-identifier">maxvalue</span>, <span class="ruby-identifier">scale_division</span> ) {<span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">rv</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">v</span>}
92:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">rv</span>
93:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000727" class="method-detail">
        <a name="M000727"></a>

        <div class="method-heading">
          <a href="#M000727" class="method-signature">
          <span class="method-name">get_y_labels</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000727-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000727-source">
<pre>
    <span class="ruby-comment cmt"># File lib/SVG/Graph/BarHorizontal.rb, line 95</span>
95:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_y_labels</span>
96:         <span class="ruby-ivar">@config</span>[<span class="ruby-identifier">:fields</span>]
97:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000728" class="method-detail">
        <a name="M000728"></a>

        <div class="method-heading">
          <a href="#M000728" class="method-signature">
          <span class="method-name">y_label_offset</span><span class="method-args">( height )</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000728-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000728-source">
<pre>
     <span class="ruby-comment cmt"># File lib/SVG/Graph/BarHorizontal.rb, line 99</span>
 99:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">y_label_offset</span>( <span class="ruby-identifier">height</span> )
100:         <span class="ruby-identifier">height</span> <span class="ruby-operator">/</span> <span class="ruby-value">-2.0</span>
101:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>