<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: SVG::Graph::Line</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">SVG::Graph::Line</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../../files/lib/SVG/Graph/Line_rb.html">
                lib/SVG/Graph/Line.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                <a href="Graph.html">
                SVG::Graph::Graph
               </a>
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <h3>Create presentation quality <a href="../../SVG.html">SVG</a> line graphs easily</h3>
<h1>Synopsis</h1>
<pre>
  require 'SVG/Graph/Line'

  fields = %w(Jan Feb Mar);
  data_sales_02 = [12, 45, 21]
  data_sales_03 = [15, 30, 40]

  graph = SVG::Graph::Line.new({
          :height =&gt; 500,
          :width =&gt; 300,
    :fields =&gt; fields,
  })

  graph.add_data({
          :data =&gt; data_sales_02,
    :title =&gt; 'Sales 2002',
  })

  graph.add_data({
          :data =&gt; data_sales_03,
    :title =&gt; 'Sales 2003',
  })

  print &quot;Content-type: image/svg+xml\r\n\r\n&quot;;
  print graph.burn();
</pre>
<h1>Description</h1>
<p>
This object aims to allow you to easily create high quality <a
href="../../SVG.html">SVG</a> line graphs. You can either use the default
style sheet or supply your own. Either way there are many options which can
be configured to give you control over how the graph is generated - with or
without a key, data elements at each point, title, subtitle etc.
</p>
<h1>Examples</h1>
<p>
<a
href="http://www.germane-software/repositories/public/SVG/test/single.rb">www.germane-software/repositories/public/SVG/test/single.rb</a>
</p>
<h1>Notes</h1>
<p>
The default stylesheet handles upto 10 data sets, if you use more you must
create your own stylesheet and add the additional settings for the extra
data sets. You will know if you go over 10 data sets as they will have no
style and be in black.
</p>
<h1>See also</h1>
<ul>
<li><a href="../Graph.html">SVG::Graph::Graph</a>

</li>
<li><a href="BarHorizontal.html">SVG::Graph::BarHorizontal</a>

</li>
<li><a href="Bar.html">SVG::Graph::Bar</a>

</li>
<li><a href="Pie.html">SVG::Graph::Pie</a>

</li>
<li><a href="Plot.html">SVG::Graph::Plot</a>

</li>
<li><a href="TimeSeries.html">SVG::Graph::TimeSeries</a>

</li>
</ul>
<h2>Author</h2>
<p>
Sean E. Russell &lt;serATgermaneHYPHENsoftwareDOTcom&gt;
</p>
<p>
Copyright 2004 Sean E. Russell This software is available under the Ruby <a
href="http://LICENSE.txt">license</a>
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000802">calc_coords</a>&nbsp;&nbsp;
      <a href="#M000800">calculate_left_margin</a>&nbsp;&nbsp;
      <a href="#M000803">draw_data</a>&nbsp;&nbsp;
      <a href="#M000804">get_css</a>&nbsp;&nbsp;
      <a href="#M000799">get_x_labels</a>&nbsp;&nbsp;
      <a href="#M000801">get_y_labels</a>&nbsp;&nbsp;
      <a href="#M000797">max_value</a>&nbsp;&nbsp;
      <a href="#M000798">min_value</a>&nbsp;&nbsp;
      <a href="#M000795">new</a>&nbsp;&nbsp;
      <a href="#M000796">set_defaults</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





    <div id="attribute-list">
      <h3 class="section-bar">Attributes</h3>

      <div class="name-list">
        <table>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">area_fill</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
Fill in the area under the plot if true

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">show_data_points</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
Show a small circle on the graph where the line goes from one point to the
next.

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">stacked</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc"><pre>
 Accumulates each data set. (i.e. Each point increased by sum of
</pre>

all previous series at same point). Default is 0, set to &#8216;1&#8217; to
show.

</td>
        </tr>
        </table>
      </div>
    </div>
      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000795" class="method-detail">
        <a name="M000795"></a>

        <div class="method-heading">
          <a href="#M000795" class="method-signature">
          <span class="method-name">new</span><span class="method-args">(config)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
The constructor takes a hash reference, fields (the names for each field on
the X axis) MUST be set, all other values are defaulted to those shown
above - with the exception of style_sheet which defaults to using the
internal style sheet.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000795-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000795-source">
<pre>
    <span class="ruby-comment cmt"># File lib/SVG/Graph/Line.rb, line 85</span>
85:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span> <span class="ruby-identifier">config</span>
86:         <span class="ruby-identifier">raise</span> <span class="ruby-value str">&quot;fields was not supplied or is empty&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">config</span>[<span class="ruby-identifier">:fields</span>] <span class="ruby-operator">&amp;&amp;</span>
87:         <span class="ruby-identifier">config</span>[<span class="ruby-identifier">:fields</span>].<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">Array</span>) <span class="ruby-operator">&amp;&amp;</span>
88:         <span class="ruby-identifier">config</span>[<span class="ruby-identifier">:fields</span>].<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
89:                                 <span class="ruby-keyword kw">super</span>
90:                         <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000796" class="method-detail">
        <a name="M000796"></a>

        <div class="method-heading">
          <a href="#M000796" class="method-signature">
          <span class="method-name">set_defaults</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
In addition to the defaults set in Graph::initialize, sets
</p>
<dl>
<dt>show_data_points</dt><dd>true

</dd>
<dt>show_data_values</dt><dd>true

</dd>
<dt>stacked</dt><dd>false

</dd>
<dt>area_fill</dt><dd>false

</dd>
</dl>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000796-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000796-source">
<pre>
     <span class="ruby-comment cmt"># File lib/SVG/Graph/Line.rb, line 97</span>
 97:                         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_defaults</span>
 98:         <span class="ruby-identifier">init_with</span>(
 99:           <span class="ruby-identifier">:show_data_points</span>   =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>,
100:           <span class="ruby-identifier">:show_data_values</span>   =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>,
101:           <span class="ruby-identifier">:stacked</span>            =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>,
102:           <span class="ruby-identifier">:area_fill</span>          =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>
103:         )
104: 
105:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">top_align</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">top_font</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">right_align</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">right_font</span> = <span class="ruby-value">1</span>
106:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <h3 class="section-bar">Protected Instance methods</h3>

      <div id="method-M000802" class="method-detail">
        <a name="M000802"></a>

        <div class="method-heading">
          <a href="#M000802" class="method-signature">
          <span class="method-name">calc_coords</span><span class="method-args">(field, value, width = field_width, height = field_height)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000802-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000802-source">
<pre>
     <span class="ruby-comment cmt"># File lib/SVG/Graph/Line.rb, line 174</span>
174:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">calc_coords</span>(<span class="ruby-identifier">field</span>, <span class="ruby-identifier">value</span>, <span class="ruby-identifier">width</span> = <span class="ruby-identifier">field_width</span>, <span class="ruby-identifier">height</span> = <span class="ruby-identifier">field_height</span>)
175:         <span class="ruby-identifier">coords</span> = {<span class="ruby-identifier">:x</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">:y</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>}
176:         <span class="ruby-identifier">coords</span>[<span class="ruby-identifier">:x</span>] = <span class="ruby-identifier">width</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">field</span>
177:         <span class="ruby-identifier">coords</span>[<span class="ruby-identifier">:y</span>] = <span class="ruby-ivar">@graph_height</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">height</span>
178:       
179:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">coords</span>
180:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000800" class="method-detail">
        <a name="M000800"></a>

        <div class="method-heading">
          <a href="#M000800" class="method-signature">
          <span class="method-name">calculate_left_margin</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000800-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000800-source">
<pre>
     <span class="ruby-comment cmt"># File lib/SVG/Graph/Line.rb, line 148</span>
148:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">calculate_left_margin</span>
149:         <span class="ruby-keyword kw">super</span>
150:         <span class="ruby-identifier">label_left</span> = <span class="ruby-ivar">@config</span>[<span class="ruby-identifier">:fields</span>][<span class="ruby-value">0</span>].<span class="ruby-identifier">length</span> <span class="ruby-operator">/</span> <span class="ruby-value">2</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">font_size</span> <span class="ruby-operator">*</span> <span class="ruby-value">0</span><span class="ruby-value">.6</span>
151:         <span class="ruby-ivar">@border_left</span> = <span class="ruby-identifier">label_left</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">label_left</span> <span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@border_left</span>
152:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000803" class="method-detail">
        <a name="M000803"></a>

        <div class="method-heading">
          <a href="#M000803" class="method-signature">
          <span class="method-name">draw_data</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000803-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000803-source">
<pre>
     <span class="ruby-comment cmt"># File lib/SVG/Graph/Line.rb, line 182</span>
182:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">draw_data</span>
183:         <span class="ruby-identifier">minvalue</span> = <span class="ruby-identifier">min_value</span>
184:         <span class="ruby-identifier">fieldheight</span> = (<span class="ruby-ivar">@graph_height</span>.<span class="ruby-identifier">to_f</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">font_size</span><span class="ruby-operator">*</span><span class="ruby-value">2</span><span class="ruby-operator">*</span><span class="ruby-identifier">top_font</span>) <span class="ruby-operator">/</span> 
185:                          (<span class="ruby-identifier">get_y_labels</span>.<span class="ruby-identifier">max</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">get_y_labels</span>.<span class="ruby-identifier">min</span>)
186:         <span class="ruby-identifier">fieldwidth</span> = <span class="ruby-identifier">field_width</span>
187:         <span class="ruby-identifier">line</span> = <span class="ruby-ivar">@data</span>.<span class="ruby-identifier">length</span>
188: 
189:         <span class="ruby-identifier">prev_sum</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@config</span>[<span class="ruby-identifier">:fields</span>].<span class="ruby-identifier">length</span>).<span class="ruby-identifier">fill</span>(<span class="ruby-value">0</span>)
190:         <span class="ruby-identifier">cum_sum</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@config</span>[<span class="ruby-identifier">:fields</span>].<span class="ruby-identifier">length</span>).<span class="ruby-identifier">fill</span>(<span class="ruby-operator">-</span><span class="ruby-identifier">minvalue</span>)
191: 
192:         <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">data</span> <span class="ruby-keyword kw">in</span> <span class="ruby-ivar">@data</span>.<span class="ruby-identifier">reverse</span>
193:           <span class="ruby-identifier">lpath</span> = <span class="ruby-value str">&quot;&quot;</span>
194:           <span class="ruby-identifier">apath</span> = <span class="ruby-value str">&quot;&quot;</span>
195: 
196:           <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">not</span> <span class="ruby-identifier">stacked</span> <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">cum_sum</span>.<span class="ruby-identifier">fill</span>(<span class="ruby-operator">-</span><span class="ruby-identifier">minvalue</span>) <span class="ruby-keyword kw">end</span>
197:           
198:           <span class="ruby-identifier">data</span>[<span class="ruby-identifier">:data</span>].<span class="ruby-identifier">each_index</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
199:             <span class="ruby-identifier">cum_sum</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">+=</span> <span class="ruby-identifier">data</span>[<span class="ruby-identifier">:data</span>][<span class="ruby-identifier">i</span>]
200:             
201:             <span class="ruby-identifier">c</span> = <span class="ruby-identifier">calc_coords</span>(<span class="ruby-identifier">i</span>, <span class="ruby-identifier">cum_sum</span>[<span class="ruby-identifier">i</span>], <span class="ruby-identifier">fieldwidth</span>, <span class="ruby-identifier">fieldheight</span>)
202:             
203:             <span class="ruby-identifier">lpath</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{c[:x]} #{c[:y]} &quot;</span>
204:           <span class="ruby-keyword kw">end</span>
205:         
206:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">area_fill</span>
207:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">stacked</span> <span class="ruby-keyword kw">then</span>
208:               (<span class="ruby-identifier">prev_sum</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>).<span class="ruby-identifier">downto</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
209:                 <span class="ruby-identifier">c</span> = <span class="ruby-identifier">calc_coords</span>(<span class="ruby-identifier">i</span>, <span class="ruby-identifier">prev_sum</span>[<span class="ruby-identifier">i</span>], <span class="ruby-identifier">fieldwidth</span>, <span class="ruby-identifier">fieldheight</span>)
210:                 
211:                 <span class="ruby-identifier">apath</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{c[:x]} #{c[:y]} &quot;</span>
212:               <span class="ruby-keyword kw">end</span>
213:           
214:               <span class="ruby-identifier">c</span> = <span class="ruby-identifier">calc_coords</span>(<span class="ruby-value">0</span>, <span class="ruby-identifier">prev_sum</span>[<span class="ruby-value">0</span>], <span class="ruby-identifier">fieldwidth</span>, <span class="ruby-identifier">fieldheight</span>)
215:             <span class="ruby-keyword kw">else</span>
216:               <span class="ruby-identifier">apath</span> = <span class="ruby-value str">&quot;V#@graph_height&quot;</span>
217:               <span class="ruby-identifier">c</span> = <span class="ruby-identifier">calc_coords</span>(<span class="ruby-value">0</span>, <span class="ruby-value">0</span>, <span class="ruby-identifier">fieldwidth</span>, <span class="ruby-identifier">fieldheight</span>)
218:             <span class="ruby-keyword kw">end</span>
219:               
220:             <span class="ruby-ivar">@graph</span>.<span class="ruby-identifier">add_element</span>(<span class="ruby-value str">&quot;path&quot;</span>, {
221:               <span class="ruby-value str">&quot;d&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;M#{c[:x]} #{c[:y]} L&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">lpath</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">apath</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;Z&quot;</span>,
222:               <span class="ruby-value str">&quot;class&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;fill#{line}&quot;</span>
223:             })
224:           <span class="ruby-keyword kw">end</span>
225:         
226:           <span class="ruby-ivar">@graph</span>.<span class="ruby-identifier">add_element</span>(<span class="ruby-value str">&quot;path&quot;</span>, {
227:             <span class="ruby-value str">&quot;d&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;M0 #@graph_height L&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">lpath</span>,
228:             <span class="ruby-value str">&quot;class&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;line#{line}&quot;</span>
229:           })
230:           
231:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">show_data_points</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">show_data_values</span>
232:             <span class="ruby-identifier">cum_sum</span>.<span class="ruby-identifier">each_index</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
233:               <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">show_data_points</span>
234:                 <span class="ruby-ivar">@graph</span>.<span class="ruby-identifier">add_element</span>( <span class="ruby-value str">&quot;circle&quot;</span>, {
235:                   <span class="ruby-value str">&quot;cx&quot;</span> =<span class="ruby-operator">&gt;</span> (<span class="ruby-identifier">fieldwidth</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">i</span>).<span class="ruby-identifier">to_s</span>,
236:                   <span class="ruby-value str">&quot;cy&quot;</span> =<span class="ruby-operator">&gt;</span> (<span class="ruby-ivar">@graph_height</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">cum_sum</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">*</span> <span class="ruby-identifier">fieldheight</span>).<span class="ruby-identifier">to_s</span>,
237:                   <span class="ruby-value str">&quot;r&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;2.5&quot;</span>,
238:                   <span class="ruby-value str">&quot;class&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;dataPoint#{line}&quot;</span>
239:                 })
240:               <span class="ruby-keyword kw">end</span>
241:               <span class="ruby-identifier">make_datapoint_text</span>( 
242:                 <span class="ruby-identifier">fieldwidth</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">i</span>, 
243:                 <span class="ruby-ivar">@graph_height</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">cum_sum</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">*</span> <span class="ruby-identifier">fieldheight</span> <span class="ruby-operator">-</span> <span class="ruby-value">6</span>,
244:                 <span class="ruby-identifier">cum_sum</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">+</span> <span class="ruby-identifier">minvalue</span>
245:               )
246:             <span class="ruby-keyword kw">end</span>
247:           <span class="ruby-keyword kw">end</span>
248: 
249:           <span class="ruby-identifier">prev_sum</span> = <span class="ruby-identifier">cum_sum</span>.<span class="ruby-identifier">dup</span>
250:           <span class="ruby-identifier">line</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
251:         <span class="ruby-keyword kw">end</span>
252:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000804" class="method-detail">
        <a name="M000804"></a>

        <div class="method-heading">
          <a href="#M000804" class="method-signature">
          <span class="method-name">get_css</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000804-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000804-source">
<pre>
     <span class="ruby-comment cmt"># File lib/SVG/Graph/Line.rb, line 255</span>
255:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_css</span>
256:         <span class="ruby-keyword kw">return</span> <span class="ruby-value str">&quot;/* default line styles */\n.line1{\n        fill: none;\n        stroke: #ff0000;\n        stroke-width: 1px;     \n}\n.line2{\n        fill: none;\n        stroke: #0000ff;\n        stroke-width: 1px;     \n}\n.line3{\n        fill: none;\n        stroke: #00ff00;\n        stroke-width: 1px;     \n}\n.line4{\n        fill: none;\n        stroke: #ffcc00;\n        stroke-width: 1px;     \n}\n.line5{\n        fill: none;\n        stroke: #00ccff;\n        stroke-width: 1px;     \n}\n.line6{\n        fill: none;\n        stroke: #ff00ff;\n        stroke-width: 1px;     \n}\n.line7{\n        fill: none;\n        stroke: #00ffff;\n        stroke-width: 1px;     \n}\n.line8{\n        fill: none;\n        stroke: #ffff00;\n        stroke-width: 1px;     \n}\n.line9{\n        fill: none;\n        stroke: #ccc6666;\n        stroke-width: 1px;     \n}\n.line10{\n        fill: none;\n        stroke: #663399;\n        stroke-width: 1px;     \n}\n.line11{\n        fill: none;\n        stroke: #339900;\n        stroke-width: 1px;     \n}\n.line12{\n        fill: none;\n        stroke: #9966FF;\n        stroke-width: 1px;     \n}\n/* default fill styles */\n.fill1{\n        fill: #cc0000;\n        fill-opacity: 0.2;\n        stroke: none;\n}\n.fill2{\n        fill: #0000cc;\n        fill-opacity: 0.2;\n        stroke: none;\n}\n.fill3{\n        fill: #00cc00;\n        fill-opacity: 0.2;\n        stroke: none;\n}\n.fill4{\n        fill: #ffcc00;\n        fill-opacity: 0.2;\n        stroke: none;\n}\n.fill5{\n        fill: #00ccff;\n        fill-opacity: 0.2;\n        stroke: none;\n}\n.fill6{\n        fill: #ff00ff;\n        fill-opacity: 0.2;\n        stroke: none;\n}\n.fill7{\n        fill: #00ffff;\n        fill-opacity: 0.2;\n        stroke: none;\n}\n.fill8{\n        fill: #ffff00;\n        fill-opacity: 0.2;\n        stroke: none;\n}\n.fill9{\n        fill: #cc6666;\n        fill-opacity: 0.2;\n        stroke: none;\n}\n.fill10{\n        fill: #663399;\n        fill-opacity: 0.2;\n        stroke: none;\n}\n.fill11{\n        fill: #339900;\n        fill-opacity: 0.2;\n        stroke: none;\n}\n.fill12{\n        fill: #9966FF;\n        fill-opacity: 0.2;\n        stroke: none;\n}\n/* default line styles */\n.key1,.dataPoint1{\n        fill: #ff0000;\n        stroke: none;\n        stroke-width: 1px;     \n}\n.key2,.dataPoint2{\n        fill: #0000ff;\n        stroke: none;\n        stroke-width: 1px;     \n}\n.key3,.dataPoint3{\n        fill: #00ff00;\n        stroke: none;\n        stroke-width: 1px;     \n}\n.key4,.dataPoint4{\n        fill: #ffcc00;\n        stroke: none;\n        stroke-width: 1px;     \n}\n.key5,.dataPoint5{\n        fill: #00ccff;\n        stroke: none;\n        stroke-width: 1px;     \n}\n.key6,.dataPoint6{\n        fill: #ff00ff;\n        stroke: none;\n        stroke-width: 1px;     \n}\n.key7,.dataPoint7{\n        fill: #00ffff;\n        stroke: none;\n        stroke-width: 1px;     \n}\n.key8,.dataPoint8{\n        fill: #ffff00;\n        stroke: none;\n        stroke-width: 1px;     \n}\n.key9,.dataPoint9{\n        fill: #cc6666;\n        stroke: none;\n        stroke-width: 1px;     \n}\n.key10,.dataPoint10{\n        fill: #663399;\n        stroke: none;\n        stroke-width: 1px;     \n}\n.key11,.dataPoint11{\n        fill: #339900;\n        stroke: none;\n        stroke-width: 1px;     \n}\n.key12,.dataPoint12{\n        fill: #9966FF;\n        stroke: none;\n        stroke-width: 1px;     \n}\n&quot;</span>
257:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000799" class="method-detail">
        <a name="M000799"></a>

        <div class="method-heading">
          <a href="#M000799" class="method-signature">
          <span class="method-name">get_x_labels</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000799-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000799-source">
<pre>
     <span class="ruby-comment cmt"># File lib/SVG/Graph/Line.rb, line 144</span>
144:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_x_labels</span>
145:         <span class="ruby-ivar">@config</span>[<span class="ruby-identifier">:fields</span>]
146:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000801" class="method-detail">
        <a name="M000801"></a>

        <div class="method-heading">
          <a href="#M000801" class="method-signature">
          <span class="method-name">get_y_labels</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000801-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000801-source">
<pre>
     <span class="ruby-comment cmt"># File lib/SVG/Graph/Line.rb, line 154</span>
154:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_y_labels</span>
155:         <span class="ruby-identifier">maxvalue</span> = <span class="ruby-identifier">max_value</span>
156:         <span class="ruby-identifier">minvalue</span> = <span class="ruby-identifier">min_value</span>
157:         <span class="ruby-identifier">range</span> = <span class="ruby-identifier">maxvalue</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">minvalue</span>
158:         <span class="ruby-identifier">top_pad</span> = <span class="ruby-identifier">range</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-operator">?</span> <span class="ruby-value">10</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">range</span> <span class="ruby-operator">/</span> <span class="ruby-value">20.0</span>
159:         <span class="ruby-identifier">scale_range</span> = (<span class="ruby-identifier">maxvalue</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">top_pad</span>) <span class="ruby-operator">-</span> <span class="ruby-identifier">minvalue</span>
160: 
161:         <span class="ruby-identifier">scale_division</span> = <span class="ruby-identifier">scale_divisions</span> <span class="ruby-operator">||</span> (<span class="ruby-identifier">scale_range</span> <span class="ruby-operator">/</span> <span class="ruby-value">10.0</span>)
162: 
163:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">scale_integers</span>
164:           <span class="ruby-identifier">scale_division</span> = <span class="ruby-identifier">scale_division</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">1</span> <span class="ruby-operator">?</span> <span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">scale_division</span>.<span class="ruby-identifier">round</span>
165:         <span class="ruby-keyword kw">end</span>
166: 
167:         <span class="ruby-identifier">rv</span> = []
168:         <span class="ruby-identifier">maxvalue</span> = <span class="ruby-identifier">maxvalue</span><span class="ruby-operator">%</span><span class="ruby-identifier">scale_division</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-operator">?</span> 
169:           <span class="ruby-identifier">maxvalue</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">maxvalue</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">scale_division</span>
170:         <span class="ruby-identifier">minvalue</span>.<span class="ruby-identifier">step</span>( <span class="ruby-identifier">maxvalue</span>, <span class="ruby-identifier">scale_division</span> ) {<span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">rv</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">v</span>}
171:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">rv</span>
172:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000797" class="method-detail">
        <a name="M000797"></a>

        <div class="method-heading">
          <a href="#M000797" class="method-signature">
          <span class="method-name">max_value</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000797-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000797-source">
<pre>
     <span class="ruby-comment cmt"># File lib/SVG/Graph/Line.rb, line 110</span>
110:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">max_value</span>
111:         <span class="ruby-identifier">max</span> = <span class="ruby-value">0</span>
112:         
113:         <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">stacked</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">true</span>) <span class="ruby-keyword kw">then</span>
114:           <span class="ruby-identifier">sums</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@config</span>[<span class="ruby-identifier">:fields</span>].<span class="ruby-identifier">length</span>).<span class="ruby-identifier">fill</span>(<span class="ruby-value">0</span>)
115: 
116:           <span class="ruby-ivar">@data</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">data</span><span class="ruby-operator">|</span>
117:             <span class="ruby-identifier">sums</span>.<span class="ruby-identifier">each_index</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
118:               <span class="ruby-identifier">sums</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">+=</span> <span class="ruby-identifier">data</span>[<span class="ruby-identifier">:data</span>][<span class="ruby-identifier">i</span>].<span class="ruby-identifier">to_f</span>
119:             <span class="ruby-keyword kw">end</span>
120:           <span class="ruby-keyword kw">end</span>
121:           
122:           <span class="ruby-identifier">max</span> = <span class="ruby-identifier">sums</span>.<span class="ruby-identifier">max</span>
123:         <span class="ruby-keyword kw">else</span>
124:           <span class="ruby-identifier">max</span> = <span class="ruby-ivar">@data</span>.<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span>[<span class="ruby-identifier">:data</span>].<span class="ruby-identifier">max</span>}.<span class="ruby-identifier">max</span>
125:         <span class="ruby-keyword kw">end</span>
126: 
127:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">max</span>
128:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000798" class="method-detail">
        <a name="M000798"></a>

        <div class="method-heading">
          <a href="#M000798" class="method-signature">
          <span class="method-name">min_value</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000798-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000798-source">
<pre>
     <span class="ruby-comment cmt"># File lib/SVG/Graph/Line.rb, line 130</span>
130:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">min_value</span>
131:         <span class="ruby-identifier">min</span> = <span class="ruby-value">0</span>
132:         
133:         <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">min_scale_value</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">false</span>) <span class="ruby-keyword kw">then</span>
134:           <span class="ruby-identifier">min</span> = <span class="ruby-identifier">min_scale_value</span>
135:         <span class="ruby-keyword kw">elsif</span> (<span class="ruby-identifier">stacked</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">true</span>) <span class="ruby-keyword kw">then</span>
136:           <span class="ruby-identifier">min</span> = <span class="ruby-ivar">@data</span>[<span class="ruby-value">-1</span>][<span class="ruby-identifier">:data</span>].<span class="ruby-identifier">min</span>
137:         <span class="ruby-keyword kw">else</span>
138:           <span class="ruby-identifier">min</span> = <span class="ruby-ivar">@data</span>.<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span>[<span class="ruby-identifier">:data</span>].<span class="ruby-identifier">min</span>}.<span class="ruby-identifier">min</span>
139:         <span class="ruby-keyword kw">end</span>
140: 
141:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">min</span>
142:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>