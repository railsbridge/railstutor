<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: Mailer</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">Mailer</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../files/app/models/mailer_rb.html">
                app/models/mailer.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                ActionMailer::Base
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
redMine - project management software Copyright (C) 2006-2007 Jean-Philippe
Lang
</p>
<p>
This program is free software; you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the Free
Software Foundation; either version 2 of the License, or (at your option)
any later version.
</p>
<p>
This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
more details.
</p>
<p>
You should have received a copy of the GNU General Public License along
with this program; if not, write to the Free Software Foundation, Inc., 51
Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000494">account_activated</a>&nbsp;&nbsp;
      <a href="#M000493">account_activation_request</a>&nbsp;&nbsp;
      <a href="#M000492">account_information</a>&nbsp;&nbsp;
      <a href="#M000487">attachments_added</a>&nbsp;&nbsp;
      <a href="#M000482">default_url_options</a>&nbsp;&nbsp;
      <a href="#M000498">deliver!</a>&nbsp;&nbsp;
      <a href="#M000486">document_added</a>&nbsp;&nbsp;
      <a href="#M000483">issue_add</a>&nbsp;&nbsp;
      <a href="#M000484">issue_edit</a>&nbsp;&nbsp;
      <a href="#M000495">lost_password</a>&nbsp;&nbsp;
      <a href="#M000489">message_posted</a>&nbsp;&nbsp;
      <a href="#M000488">news_added</a>&nbsp;&nbsp;
      <a href="#M000496">register</a>&nbsp;&nbsp;
      <a href="#M000485">reminder</a>&nbsp;&nbsp;
      <a href="#M000499">reminders</a>&nbsp;&nbsp;
      <a href="#M000497">test</a>&nbsp;&nbsp;
      <a href="#M000490">wiki_content_added</a>&nbsp;&nbsp;
      <a href="#M000491">wiki_content_updated</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->
    <div id="includes">
      <h3 class="section-bar">Included Modules</h3>

      <div id="includes-list">
        <span class="include-name">ActionController::UrlWriter</span>
        <span class="include-name"><a href="Redmine/I18n.html">Redmine::I18n</a></span>
      </div>
    </div>

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000482" class="method-detail">
        <a name="M000482"></a>

        <div class="method-heading">
          <a href="#M000482" class="method-signature">
          <span class="method-name">default_url_options</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000482-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000482-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/mailer.rb, line 26</span>
26:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">default_url_options</span>
27:     <span class="ruby-identifier">h</span> = <span class="ruby-constant">Setting</span>.<span class="ruby-identifier">host_name</span>
28:     <span class="ruby-identifier">h</span> = <span class="ruby-identifier">h</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">%r{\/.*$}</span>, <span class="ruby-value str">''</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">Redmine</span><span class="ruby-operator">::</span><span class="ruby-constant">Utils</span>.<span class="ruby-identifier">relative_url_root</span>.<span class="ruby-identifier">blank?</span>
29:     { <span class="ruby-identifier">:host</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">h</span>, <span class="ruby-identifier">:protocol</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Setting</span>.<span class="ruby-identifier">protocol</span> }
30:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000499" class="method-detail">
        <a name="M000499"></a>

        <div class="method-heading">
          <a href="#M000499" class="method-signature">
          <span class="method-name">reminders</span><span class="method-args">(options={})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Sends <a href="Mailer.html#M000499">reminders</a> to issue assignees
Available options:
</p>
<ul>
<li>:days =&gt; how many days in the future to remind about (defaults to 7)

</li>
<li>:tracker =&gt; id of tracker for filtering issues (defaults to all
trackers)

</li>
<li>:project =&gt; id or identifier of project to process (defaults to all
projects)

</li>
</ul>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000499-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000499-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/mailer.rb, line 274</span>
274:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">reminders</span>(<span class="ruby-identifier">options</span>={})
275:     <span class="ruby-identifier">days</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:days</span>] <span class="ruby-operator">||</span> <span class="ruby-value">7</span>
276:     <span class="ruby-identifier">project</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:project</span>] <span class="ruby-operator">?</span> <span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:project</span>]) <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
277:     <span class="ruby-identifier">tracker</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:tracker</span>] <span class="ruby-operator">?</span> <span class="ruby-constant">Tracker</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:tracker</span>]) <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
278: 
279:     <span class="ruby-identifier">s</span> = <span class="ruby-constant">ARCondition</span>.<span class="ruby-identifier">new</span> [<span class="ruby-node">&quot;#{IssueStatus.table_name}.is_closed = ? AND #{Issue.table_name}.due_date &lt;= ?&quot;</span>, <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">days</span>.<span class="ruby-identifier">day</span>.<span class="ruby-identifier">from_now</span>.<span class="ruby-identifier">to_date</span>]
280:     <span class="ruby-identifier">s</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{Issue.table_name}.assigned_to_id IS NOT NULL&quot;</span>
281:     <span class="ruby-identifier">s</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{Project.table_name}.status = #{Project::STATUS_ACTIVE}&quot;</span>
282:     <span class="ruby-identifier">s</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{Issue.table_name}.project_id = #{project.id}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">project</span>
283:     <span class="ruby-identifier">s</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{Issue.table_name}.tracker_id = #{tracker.id}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">tracker</span>
284: 
285:     <span class="ruby-identifier">issues_by_assignee</span> = <span class="ruby-constant">Issue</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-identifier">:status</span>, <span class="ruby-identifier">:assigned_to</span>, <span class="ruby-identifier">:project</span>, <span class="ruby-identifier">:tracker</span>],
286:                                           <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">conditions</span>
287:                                     ).<span class="ruby-identifier">group_by</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:assigned_to</span>)
288:     <span class="ruby-identifier">issues_by_assignee</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">assignee</span>, <span class="ruby-identifier">issues</span><span class="ruby-operator">|</span>
289:       <span class="ruby-identifier">deliver_reminder</span>(<span class="ruby-identifier">assignee</span>, <span class="ruby-identifier">issues</span>, <span class="ruby-identifier">days</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">assignee</span>.<span class="ruby-identifier">nil?</span>
290:     <span class="ruby-keyword kw">end</span>
291:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000494" class="method-detail">
        <a name="M000494"></a>

        <div class="method-heading">
          <a href="#M000494" class="method-signature">
          <span class="method-name">account_activated</span><span class="method-args">(user)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Builds a tmail object used to email the specified user that their account
was activated by an administrator.
</p>
<p>
Example:
</p>
<pre>
  account_activated(user) =&gt; tmail object
  Mailer.deliver_account_activated(user) =&gt; sends an email to the registered user
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000494-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000494-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/mailer.rb, line 221</span>
221:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">account_activated</span>(<span class="ruby-identifier">user</span>)
222:     <span class="ruby-identifier">set_language_if_valid</span> <span class="ruby-identifier">user</span>.<span class="ruby-identifier">language</span>
223:     <span class="ruby-identifier">recipients</span> <span class="ruby-identifier">user</span>.<span class="ruby-identifier">mail</span>
224:     <span class="ruby-identifier">subject</span> <span class="ruby-identifier">l</span>(<span class="ruby-identifier">:mail_subject_register</span>, <span class="ruby-constant">Setting</span>.<span class="ruby-identifier">app_title</span>)
225:     <span class="ruby-identifier">body</span> <span class="ruby-identifier">:user</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">user</span>,
226:          <span class="ruby-identifier">:login_url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'account'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'login'</span>)
227:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000493" class="method-detail">
        <a name="M000493"></a>

        <div class="method-heading">
          <a href="#M000493" class="method-signature">
          <span class="method-name">account_activation_request</span><span class="method-args">(user)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Builds a tmail object used to email all active administrators of an account
activation request.
</p>
<p>
Example:
</p>
<pre>
  account_activation_request(user) =&gt; tmail object
  Mailer.deliver_account_activation_request(user)=&gt; sends an email to all active administrators
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000493-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000493-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/mailer.rb, line 208</span>
208:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">account_activation_request</span>(<span class="ruby-identifier">user</span>)
209:     <span class="ruby-comment cmt"># Send the email to all active administrators</span>
210:     <span class="ruby-identifier">recipients</span> <span class="ruby-constant">User</span>.<span class="ruby-identifier">active</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:admin</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>}).<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">u</span><span class="ruby-operator">|</span> <span class="ruby-identifier">u</span>.<span class="ruby-identifier">mail</span> }.<span class="ruby-identifier">compact</span>
211:     <span class="ruby-identifier">subject</span> <span class="ruby-identifier">l</span>(<span class="ruby-identifier">:mail_subject_account_activation_request</span>, <span class="ruby-constant">Setting</span>.<span class="ruby-identifier">app_title</span>)
212:     <span class="ruby-identifier">body</span> <span class="ruby-identifier">:user</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">user</span>,
213:          <span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'users'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>, <span class="ruby-identifier">:status</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">User</span><span class="ruby-operator">::</span><span class="ruby-constant">STATUS_REGISTERED</span>, <span class="ruby-identifier">:sort_key</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'created_on'</span>, <span class="ruby-identifier">:sort_order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'desc'</span>)
214:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000492" class="method-detail">
        <a name="M000492"></a>

        <div class="method-heading">
          <a href="#M000492" class="method-signature">
          <span class="method-name">account_information</span><span class="method-args">(user, password)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Builds a tmail object used to email the specified user their account
information.
</p>
<p>
Example:
</p>
<pre>
  account_information(user, password) =&gt; tmail object
  Mailer.deliver_account_information(user, password) =&gt; sends account information to the user
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000492-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000492-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/mailer.rb, line 194</span>
194:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">account_information</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">password</span>)
195:     <span class="ruby-identifier">set_language_if_valid</span> <span class="ruby-identifier">user</span>.<span class="ruby-identifier">language</span>
196:     <span class="ruby-identifier">recipients</span> <span class="ruby-identifier">user</span>.<span class="ruby-identifier">mail</span>
197:     <span class="ruby-identifier">subject</span> <span class="ruby-identifier">l</span>(<span class="ruby-identifier">:mail_subject_register</span>, <span class="ruby-constant">Setting</span>.<span class="ruby-identifier">app_title</span>)
198:     <span class="ruby-identifier">body</span> <span class="ruby-identifier">:user</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">user</span>,
199:          <span class="ruby-identifier">:password</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">password</span>,
200:          <span class="ruby-identifier">:login_url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'account'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'login'</span>)
201:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000487" class="method-detail">
        <a name="M000487"></a>

        <div class="method-heading">
          <a href="#M000487" class="method-signature">
          <span class="method-name">attachments_added</span><span class="method-args">(attachments)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Builds a tmail object used to email recipients of a project when an
attachements are added.
</p>
<p>
Example:
</p>
<pre>
  attachments_added(attachments) =&gt; tmail object
  Mailer.deliver_attachments_added(attachments) =&gt; sends an email to the project's recipients
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000487-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000487-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/mailer.rb, line 103</span>
103:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attachments_added</span>(<span class="ruby-identifier">attachments</span>)
104:     <span class="ruby-identifier">container</span> = <span class="ruby-identifier">attachments</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">container</span>
105:     <span class="ruby-identifier">added_to</span> = <span class="ruby-value str">''</span>
106:     <span class="ruby-identifier">added_to_url</span> = <span class="ruby-value str">''</span>
107:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">container</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">name</span>
108:     <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'Project'</span>
109:       <span class="ruby-identifier">added_to_url</span> = <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'projects'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list_files'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">container</span>)
110:       <span class="ruby-identifier">added_to</span> = <span class="ruby-node">&quot;#{l(:label_project)}: #{container}&quot;</span>
111:     <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'Version'</span>
112:       <span class="ruby-identifier">added_to_url</span> = <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'projects'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list_files'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">container</span>.<span class="ruby-identifier">project_id</span>)
113:       <span class="ruby-identifier">added_to</span> = <span class="ruby-node">&quot;#{l(:label_version)}: #{container.name}&quot;</span>
114:     <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'Document'</span>
115:       <span class="ruby-identifier">added_to_url</span> = <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'documents'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">container</span>.<span class="ruby-identifier">id</span>)
116:       <span class="ruby-identifier">added_to</span> = <span class="ruby-node">&quot;#{l(:label_document)}: #{container.title}&quot;</span>
117:     <span class="ruby-keyword kw">end</span>
118:     <span class="ruby-identifier">redmine_headers</span> <span class="ruby-value str">'Project'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">container</span>.<span class="ruby-identifier">project</span>.<span class="ruby-identifier">identifier</span>
119:     <span class="ruby-identifier">recipients</span> <span class="ruby-identifier">container</span>.<span class="ruby-identifier">project</span>.<span class="ruby-identifier">recipients</span>
120:     <span class="ruby-identifier">subject</span> <span class="ruby-node">&quot;[#{container.project.name}] #{l(:label_attachment_new)}&quot;</span>
121:     <span class="ruby-identifier">body</span> <span class="ruby-identifier">:attachments</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">attachments</span>,
122:          <span class="ruby-identifier">:added_to</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">added_to</span>,
123:          <span class="ruby-identifier">:added_to_url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">added_to_url</span>
124:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000498" class="method-detail">
        <a name="M000498"></a>

        <div class="method-heading">
          <a href="#M000498" class="method-signature">
          <span class="method-name">deliver!</span><span class="method-args">(mail = @mail)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Overrides default <a href="Mailer.html#M000498">deliver!</a> method to
prevent from sending an email with no recipient, cc or bcc
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000498-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000498-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/mailer.rb, line 254</span>
254:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">deliver!</span>(<span class="ruby-identifier">mail</span> = <span class="ruby-ivar">@mail</span>)
255:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">recipients</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">recipients</span>.<span class="ruby-identifier">empty?</span>) <span class="ruby-operator">&amp;&amp;</span>
256:                     (<span class="ruby-identifier">cc</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">cc</span>.<span class="ruby-identifier">empty?</span>) <span class="ruby-operator">&amp;&amp;</span>
257:                     (<span class="ruby-identifier">bcc</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">bcc</span>.<span class="ruby-identifier">empty?</span>)
258:                     
259:     <span class="ruby-comment cmt"># Set Message-Id and References</span>
260:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@message_id_object</span>
261:       <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">message_id</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">message_id_for</span>(<span class="ruby-ivar">@message_id_object</span>)
262:     <span class="ruby-keyword kw">end</span>
263:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@references_objects</span>
264:       <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">references</span> = <span class="ruby-ivar">@references_objects</span>.<span class="ruby-identifier">collect</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">o</span><span class="ruby-operator">|</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">message_id_for</span>(<span class="ruby-identifier">o</span>)}
265:     <span class="ruby-keyword kw">end</span>
266:     <span class="ruby-keyword kw">super</span>(<span class="ruby-identifier">mail</span>)
267:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000486" class="method-detail">
        <a name="M000486"></a>

        <div class="method-heading">
          <a href="#M000486" class="method-signature">
          <span class="method-name">document_added</span><span class="method-args">(document)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Builds a tmail object used to email users belonging to the added
document&#8216;s project.
</p>
<p>
Example:
</p>
<pre>
  document_added(document) =&gt; tmail object
  Mailer.deliver_document_added(document) =&gt; sends an email to the document's project recipients
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000486-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000486-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/mailer.rb, line 90</span>
90:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">document_added</span>(<span class="ruby-identifier">document</span>)
91:     <span class="ruby-identifier">redmine_headers</span> <span class="ruby-value str">'Project'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">document</span>.<span class="ruby-identifier">project</span>.<span class="ruby-identifier">identifier</span>
92:     <span class="ruby-identifier">recipients</span> <span class="ruby-identifier">document</span>.<span class="ruby-identifier">project</span>.<span class="ruby-identifier">recipients</span>
93:     <span class="ruby-identifier">subject</span> <span class="ruby-node">&quot;[#{document.project.name}] #{l(:label_document_new)}: #{document.title}&quot;</span>
94:     <span class="ruby-identifier">body</span> <span class="ruby-identifier">:document</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">document</span>,
95:          <span class="ruby-identifier">:document_url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'documents'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">document</span>)
96:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000483" class="method-detail">
        <a name="M000483"></a>

        <div class="method-heading">
          <a href="#M000483" class="method-signature">
          <span class="method-name">issue_add</span><span class="method-args">(issue)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Builds a tmail object used to email recipients of the added issue.
</p>
<p>
Example:
</p>
<pre>
  issue_add(issue) =&gt; tmail object
  Mailer.deliver_issue_add(issue) =&gt; sends an email to issue recipients
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000483-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000483-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/mailer.rb, line 37</span>
37:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">issue_add</span>(<span class="ruby-identifier">issue</span>)
38:     <span class="ruby-identifier">redmine_headers</span> <span class="ruby-value str">'Project'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">issue</span>.<span class="ruby-identifier">project</span>.<span class="ruby-identifier">identifier</span>,
39:                     <span class="ruby-value str">'Issue-Id'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">issue</span>.<span class="ruby-identifier">id</span>,
40:                     <span class="ruby-value str">'Issue-Author'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">issue</span>.<span class="ruby-identifier">author</span>.<span class="ruby-identifier">login</span>
41:     <span class="ruby-identifier">redmine_headers</span> <span class="ruby-value str">'Issue-Assignee'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">issue</span>.<span class="ruby-identifier">assigned_to</span>.<span class="ruby-identifier">login</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">issue</span>.<span class="ruby-identifier">assigned_to</span>
42:     <span class="ruby-identifier">message_id</span> <span class="ruby-identifier">issue</span>
43:     <span class="ruby-identifier">recipients</span> <span class="ruby-identifier">issue</span>.<span class="ruby-identifier">recipients</span>
44:     <span class="ruby-identifier">cc</span>(<span class="ruby-identifier">issue</span>.<span class="ruby-identifier">watcher_recipients</span> <span class="ruby-operator">-</span> <span class="ruby-ivar">@recipients</span>)
45:     <span class="ruby-identifier">subject</span> <span class="ruby-node">&quot;[#{issue.project.name} - #{issue.tracker.name} ##{issue.id}] (#{issue.status.name}) #{issue.subject}&quot;</span>
46:     <span class="ruby-identifier">body</span> <span class="ruby-identifier">:issue</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">issue</span>,
47:          <span class="ruby-identifier">:issue_url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'issues'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">issue</span>)
48:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000484" class="method-detail">
        <a name="M000484"></a>

        <div class="method-heading">
          <a href="#M000484" class="method-signature">
          <span class="method-name">issue_edit</span><span class="method-args">(journal)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Builds a tmail object used to email recipients of the edited issue.
</p>
<p>
Example:
</p>
<pre>
  issue_edit(journal) =&gt; tmail object
  Mailer.deliver_issue_edit(journal) =&gt; sends an email to issue recipients
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000484-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000484-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/mailer.rb, line 55</span>
55:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">issue_edit</span>(<span class="ruby-identifier">journal</span>)
56:     <span class="ruby-identifier">issue</span> = <span class="ruby-identifier">journal</span>.<span class="ruby-identifier">journalized</span>.<span class="ruby-identifier">reload</span>
57:     <span class="ruby-identifier">redmine_headers</span> <span class="ruby-value str">'Project'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">issue</span>.<span class="ruby-identifier">project</span>.<span class="ruby-identifier">identifier</span>,
58:                     <span class="ruby-value str">'Issue-Id'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">issue</span>.<span class="ruby-identifier">id</span>,
59:                     <span class="ruby-value str">'Issue-Author'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">issue</span>.<span class="ruby-identifier">author</span>.<span class="ruby-identifier">login</span>
60:     <span class="ruby-identifier">redmine_headers</span> <span class="ruby-value str">'Issue-Assignee'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">issue</span>.<span class="ruby-identifier">assigned_to</span>.<span class="ruby-identifier">login</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">issue</span>.<span class="ruby-identifier">assigned_to</span>
61:     <span class="ruby-identifier">message_id</span> <span class="ruby-identifier">journal</span>
62:     <span class="ruby-identifier">references</span> <span class="ruby-identifier">issue</span>
63:     <span class="ruby-ivar">@author</span> = <span class="ruby-identifier">journal</span>.<span class="ruby-identifier">user</span>
64:     <span class="ruby-identifier">recipients</span> <span class="ruby-identifier">issue</span>.<span class="ruby-identifier">recipients</span>
65:     <span class="ruby-comment cmt"># Watchers in cc</span>
66:     <span class="ruby-identifier">cc</span>(<span class="ruby-identifier">issue</span>.<span class="ruby-identifier">watcher_recipients</span> <span class="ruby-operator">-</span> <span class="ruby-ivar">@recipients</span>)
67:     <span class="ruby-identifier">s</span> = <span class="ruby-node">&quot;[#{issue.project.name} - #{issue.tracker.name} ##{issue.id}] &quot;</span>
68:     <span class="ruby-identifier">s</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;(#{issue.status.name}) &quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">journal</span>.<span class="ruby-identifier">new_value_for</span>(<span class="ruby-value str">'status_id'</span>)
69:     <span class="ruby-identifier">s</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">issue</span>.<span class="ruby-identifier">subject</span>
70:     <span class="ruby-identifier">subject</span> <span class="ruby-identifier">s</span>
71:     <span class="ruby-identifier">body</span> <span class="ruby-identifier">:issue</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">issue</span>,
72:          <span class="ruby-identifier">:journal</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">journal</span>,
73:          <span class="ruby-identifier">:issue_url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'issues'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">issue</span>)
74:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000495" class="method-detail">
        <a name="M000495"></a>

        <div class="method-heading">
          <a href="#M000495" class="method-signature">
          <span class="method-name">lost_password</span><span class="method-args">(token)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000495-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000495-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/mailer.rb, line 229</span>
229:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">lost_password</span>(<span class="ruby-identifier">token</span>)
230:     <span class="ruby-identifier">set_language_if_valid</span>(<span class="ruby-identifier">token</span>.<span class="ruby-identifier">user</span>.<span class="ruby-identifier">language</span>)
231:     <span class="ruby-identifier">recipients</span> <span class="ruby-identifier">token</span>.<span class="ruby-identifier">user</span>.<span class="ruby-identifier">mail</span>
232:     <span class="ruby-identifier">subject</span> <span class="ruby-identifier">l</span>(<span class="ruby-identifier">:mail_subject_lost_password</span>, <span class="ruby-constant">Setting</span>.<span class="ruby-identifier">app_title</span>)
233:     <span class="ruby-identifier">body</span> <span class="ruby-identifier">:token</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">token</span>,
234:          <span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'account'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'lost_password'</span>, <span class="ruby-identifier">:token</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">token</span>.<span class="ruby-identifier">value</span>)
235:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000489" class="method-detail">
        <a name="M000489"></a>

        <div class="method-heading">
          <a href="#M000489" class="method-signature">
          <span class="method-name">message_posted</span><span class="method-args">(message, recipients)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Builds a tmail object used to email the specified recipients of the
specified message that was posted.
</p>
<p>
Example:
</p>
<pre>
  message_posted(message, recipients) =&gt; tmail object
  Mailer.deliver_message_posted(message, recipients) =&gt; sends an email to the recipients
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000489-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000489-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/mailer.rb, line 145</span>
145:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">message_posted</span>(<span class="ruby-identifier">message</span>, <span class="ruby-identifier">recipients</span>)
146:     <span class="ruby-identifier">redmine_headers</span> <span class="ruby-value str">'Project'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">message</span>.<span class="ruby-identifier">project</span>.<span class="ruby-identifier">identifier</span>,
147:                     <span class="ruby-value str">'Topic-Id'</span> =<span class="ruby-operator">&gt;</span> (<span class="ruby-identifier">message</span>.<span class="ruby-identifier">parent_id</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">message</span>.<span class="ruby-identifier">id</span>)
148:     <span class="ruby-identifier">message_id</span> <span class="ruby-identifier">message</span>
149:     <span class="ruby-identifier">references</span> <span class="ruby-identifier">message</span>.<span class="ruby-identifier">parent</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">message</span>.<span class="ruby-identifier">parent</span>.<span class="ruby-identifier">nil?</span>
150:     <span class="ruby-identifier">recipients</span>(<span class="ruby-identifier">recipients</span>)
151:     <span class="ruby-identifier">subject</span> <span class="ruby-node">&quot;[#{message.board.project.name} - #{message.board.name} - msg#{message.root.id}] #{message.subject}&quot;</span>
152:     <span class="ruby-identifier">body</span> <span class="ruby-identifier">:message</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">message</span>,
153:          <span class="ruby-identifier">:message_url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'messages'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:board_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">message</span>.<span class="ruby-identifier">board_id</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">message</span>.<span class="ruby-identifier">root</span>)
154:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000488" class="method-detail">
        <a name="M000488"></a>

        <div class="method-heading">
          <a href="#M000488" class="method-signature">
          <span class="method-name">news_added</span><span class="method-args">(news)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Builds a tmail object used to email recipients of a news&#8217; project
when a news item is added.
</p>
<p>
Example:
</p>
<pre>
  news_added(news) =&gt; tmail object
  Mailer.deliver_news_added(news) =&gt; sends an email to the news' project recipients
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000488-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000488-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/mailer.rb, line 131</span>
131:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">news_added</span>(<span class="ruby-identifier">news</span>)
132:     <span class="ruby-identifier">redmine_headers</span> <span class="ruby-value str">'Project'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">news</span>.<span class="ruby-identifier">project</span>.<span class="ruby-identifier">identifier</span>
133:     <span class="ruby-identifier">message_id</span> <span class="ruby-identifier">news</span>
134:     <span class="ruby-identifier">recipients</span> <span class="ruby-identifier">news</span>.<span class="ruby-identifier">project</span>.<span class="ruby-identifier">recipients</span>
135:     <span class="ruby-identifier">subject</span> <span class="ruby-node">&quot;[#{news.project.name}] #{l(:label_news)}: #{news.title}&quot;</span>
136:     <span class="ruby-identifier">body</span> <span class="ruby-identifier">:news</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">news</span>,
137:          <span class="ruby-identifier">:news_url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'news'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">news</span>)
138:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000496" class="method-detail">
        <a name="M000496"></a>

        <div class="method-heading">
          <a href="#M000496" class="method-signature">
          <span class="method-name">register</span><span class="method-args">(token)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000496-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000496-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/mailer.rb, line 237</span>
237:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">register</span>(<span class="ruby-identifier">token</span>)
238:     <span class="ruby-identifier">set_language_if_valid</span>(<span class="ruby-identifier">token</span>.<span class="ruby-identifier">user</span>.<span class="ruby-identifier">language</span>)
239:     <span class="ruby-identifier">recipients</span> <span class="ruby-identifier">token</span>.<span class="ruby-identifier">user</span>.<span class="ruby-identifier">mail</span>
240:     <span class="ruby-identifier">subject</span> <span class="ruby-identifier">l</span>(<span class="ruby-identifier">:mail_subject_register</span>, <span class="ruby-constant">Setting</span>.<span class="ruby-identifier">app_title</span>)
241:     <span class="ruby-identifier">body</span> <span class="ruby-identifier">:token</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">token</span>,
242:          <span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'account'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'activate'</span>, <span class="ruby-identifier">:token</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">token</span>.<span class="ruby-identifier">value</span>)
243:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000485" class="method-detail">
        <a name="M000485"></a>

        <div class="method-heading">
          <a href="#M000485" class="method-signature">
          <span class="method-name">reminder</span><span class="method-args">(user, issues, days)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000485-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000485-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/mailer.rb, line 76</span>
76:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">reminder</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">issues</span>, <span class="ruby-identifier">days</span>)
77:     <span class="ruby-identifier">set_language_if_valid</span> <span class="ruby-identifier">user</span>.<span class="ruby-identifier">language</span>
78:     <span class="ruby-identifier">recipients</span> <span class="ruby-identifier">user</span>.<span class="ruby-identifier">mail</span>
79:     <span class="ruby-identifier">subject</span> <span class="ruby-identifier">l</span>(<span class="ruby-identifier">:mail_subject_reminder</span>, <span class="ruby-identifier">issues</span>.<span class="ruby-identifier">size</span>)
80:     <span class="ruby-identifier">body</span> <span class="ruby-identifier">:issues</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">issues</span>,
81:          <span class="ruby-identifier">:days</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">days</span>,
82:          <span class="ruby-identifier">:issues_url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'issues'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>, <span class="ruby-identifier">:set_filter</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">:assigned_to_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">user</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">:sort_key</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'due_date'</span>, <span class="ruby-identifier">:sort_order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'asc'</span>)
83:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000497" class="method-detail">
        <a name="M000497"></a>

        <div class="method-heading">
          <a href="#M000497" class="method-signature">
          <span class="method-name">test</span><span class="method-args">(user)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000497-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000497-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/mailer.rb, line 245</span>
245:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test</span>(<span class="ruby-identifier">user</span>)
246:     <span class="ruby-identifier">set_language_if_valid</span>(<span class="ruby-identifier">user</span>.<span class="ruby-identifier">language</span>)
247:     <span class="ruby-identifier">recipients</span> <span class="ruby-identifier">user</span>.<span class="ruby-identifier">mail</span>
248:     <span class="ruby-identifier">subject</span> <span class="ruby-value str">'Redmine test'</span>
249:     <span class="ruby-identifier">body</span> <span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'welcome'</span>)
250:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000490" class="method-detail">
        <a name="M000490"></a>

        <div class="method-heading">
          <a href="#M000490" class="method-signature">
          <span class="method-name">wiki_content_added</span><span class="method-args">(wiki_content)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Builds a tmail object used to email the recipients of a project of the
specified wiki content was added.
</p>
<p>
Example:
</p>
<pre>
  wiki_content_added(wiki_content) =&gt; tmail object
  Mailer.deliver_wiki_content_added(wiki_content) =&gt; sends an email to the project's recipients
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000490-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000490-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/mailer.rb, line 161</span>
161:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">wiki_content_added</span>(<span class="ruby-identifier">wiki_content</span>)
162:     <span class="ruby-identifier">redmine_headers</span> <span class="ruby-value str">'Project'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">wiki_content</span>.<span class="ruby-identifier">project</span>.<span class="ruby-identifier">identifier</span>,
163:                     <span class="ruby-value str">'Wiki-Page-Id'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">wiki_content</span>.<span class="ruby-identifier">page</span>.<span class="ruby-identifier">id</span>
164:     <span class="ruby-identifier">message_id</span> <span class="ruby-identifier">wiki_content</span>
165:     <span class="ruby-identifier">recipients</span> <span class="ruby-identifier">wiki_content</span>.<span class="ruby-identifier">project</span>.<span class="ruby-identifier">recipients</span>
166:     <span class="ruby-identifier">cc</span>(<span class="ruby-identifier">wiki_content</span>.<span class="ruby-identifier">page</span>.<span class="ruby-identifier">wiki</span>.<span class="ruby-identifier">watcher_recipients</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">recipients</span>)
167:     <span class="ruby-identifier">subject</span> <span class="ruby-node">&quot;[#{wiki_content.project.name}] #{l(:mail_subject_wiki_content_added, :page =&gt; wiki_content.page.pretty_title)}&quot;</span>
168:     <span class="ruby-identifier">body</span> <span class="ruby-identifier">:wiki_content</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">wiki_content</span>,
169:          <span class="ruby-identifier">:wiki_content_url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'wiki'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">wiki_content</span>.<span class="ruby-identifier">project</span>, <span class="ruby-identifier">:page</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">wiki_content</span>.<span class="ruby-identifier">page</span>.<span class="ruby-identifier">title</span>)
170:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000491" class="method-detail">
        <a name="M000491"></a>

        <div class="method-heading">
          <a href="#M000491" class="method-signature">
          <span class="method-name">wiki_content_updated</span><span class="method-args">(wiki_content)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Builds a tmail object used to email the recipients of a project of the
specified wiki content was updated.
</p>
<p>
Example:
</p>
<pre>
  wiki_content_updated(wiki_content) =&gt; tmail object
  Mailer.deliver_wiki_content_updated(wiki_content) =&gt; sends an email to the project's recipients
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000491-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000491-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/mailer.rb, line 177</span>
177:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">wiki_content_updated</span>(<span class="ruby-identifier">wiki_content</span>)
178:     <span class="ruby-identifier">redmine_headers</span> <span class="ruby-value str">'Project'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">wiki_content</span>.<span class="ruby-identifier">project</span>.<span class="ruby-identifier">identifier</span>,
179:                     <span class="ruby-value str">'Wiki-Page-Id'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">wiki_content</span>.<span class="ruby-identifier">page</span>.<span class="ruby-identifier">id</span>
180:     <span class="ruby-identifier">message_id</span> <span class="ruby-identifier">wiki_content</span>
181:     <span class="ruby-identifier">recipients</span> <span class="ruby-identifier">wiki_content</span>.<span class="ruby-identifier">project</span>.<span class="ruby-identifier">recipients</span>
182:     <span class="ruby-identifier">cc</span>(<span class="ruby-identifier">wiki_content</span>.<span class="ruby-identifier">page</span>.<span class="ruby-identifier">wiki</span>.<span class="ruby-identifier">watcher_recipients</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">wiki_content</span>.<span class="ruby-identifier">page</span>.<span class="ruby-identifier">watcher_recipients</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">recipients</span>)
183:     <span class="ruby-identifier">subject</span> <span class="ruby-node">&quot;[#{wiki_content.project.name}] #{l(:mail_subject_wiki_content_updated, :page =&gt; wiki_content.page.pretty_title)}&quot;</span>
184:     <span class="ruby-identifier">body</span> <span class="ruby-identifier">:wiki_content</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">wiki_content</span>,
185:          <span class="ruby-identifier">:wiki_content_url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'wiki'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">wiki_content</span>.<span class="ruby-identifier">project</span>, <span class="ruby-identifier">:page</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">wiki_content</span>.<span class="ruby-identifier">page</span>.<span class="ruby-identifier">title</span>),
186:          <span class="ruby-identifier">:wiki_diff_url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'wiki'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'diff'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">wiki_content</span>.<span class="ruby-identifier">project</span>, <span class="ruby-identifier">:page</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">wiki_content</span>.<span class="ruby-identifier">page</span>.<span class="ruby-identifier">title</span>, <span class="ruby-identifier">:version</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">wiki_content</span>.<span class="ruby-identifier">version</span>)
187:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>